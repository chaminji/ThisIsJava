# 08. 중첩 클래스와 중첩 인터페이스
## 중첩 클래스와 중첩 인터페이스란?

* 중첩 클래스는 클래스 내부에 선언된 클래스를 말한다.

* 이를 사용하면 두 클래스의 멤버들을 서로 쉽게 접근할 수 있고, 코드의 복잡성을 줄일 수 있다.

* 중첩 인터페이스는 클래스 내부에 선언된 인터페이스를 말한다.

```java
class ClassName{
    class NestedClassName{ } //중첩 클래스
    interface NestedInterfaceName{ } //중첩 인터페이스
}
```

## 중첩 클래스

* 중첩 클래스는 선언되는 위치에 따라 두 가지로 분류된다.

    * 멤버 클래스는 클래스의 멤버로서 선언되는 중첩 클래스이다.

    * 로컬 클래스는 메소드 내부에서 선언되는 중첩 클래스이다. 이는 메소드 실행 시에만 사용되고, 메소드가 실행 종료되면 없어진다.

```java
A $ B.class //멤버클래스, A는 바깥클래스, B는 멤버클래스
A $1 B.class //로컬클래스
```

### 인스턴스 멤버 클래스

* 인스턴스 멤버 클래스는 static 키워드 없이 선언된 클래스를 말한다.

```java
class A{
    class B{
        B(){}
        int field;
    }
}
//사용시
A a = new A();
A.B b = a.new B(); //A객체 생성 후 B객체 생성
```

### 정적 멤버 클래스

* 정적 멤버 클래스는 static 키워드로 선언된 클래스를 말한다.

```java
class A{
    static class C{
        C(){}
        int field2;
    }
}
//사용시
A.C c = new A.C(); //A객체 생성 없이 C객체 생성 가능
```

### 로컬 클래스

* 메소드 내에서 선언하는 중첩클래스를 로컬 클래스라고 한다.

* 로컬 클래스는 접근 제한자 및 static을 붙일 수 없다.

_[A.java] 참고_

_[Main.java] 참고_

## 중첩클래스의 접근 제한

### 바깥 필드와 메소드에서 사용 제한

* 멤버 클래스가 인스턴스 또는 정적으로 선언되면 바깥 클래스의 필드와 메소드에 사용 제한이 생긴다.

_[A2.java] 참고_

### 멤버 클래스에서 사용 제한

* 멤버 클래스가 인스턴스 또는 정적으로 선언되면 멤버 클래스 내부에서 바깥 클래스의 필드와 메소드를 접근할 때도 제한이 따른다.

* 인스턴스 멤버 클래스 안에서는 바깥 클래스의 모든 필드와 모든 메소드에 접근할 수 있지만, 정적 멤버 클래스 안에서는 바깥 클래스의 정적 필드와 메소드에만 접근할 수 있다.

### 로컬 클래스에서 사용 제한

* 로컬 클래스 내부에서는 바깥 클래스의 필드나 메소드를 제한 없이 사용할 수 있다.

* 하지만 매개 변수나 로컬 변수는 메소드 실행이 끝나면 스택 메모리에서 사라지고 로컬 객체에서 사용할 경우 문제가 발생한다.

* 자바는 이를 해결하기 위해 컴파일 시 변수의 값을 로컬 클래스 내부에 복사해 두고 사용한다.

* 또한 매개 변수나 로컬 변수가 수정되어 값이 변경되면 복사해 둔 값과 달라지는 것을 막기 위해 final로 선언을 한다.

* 로컬 클래스에서 사용된 매개 변수와 로컬 변수는 모두 final 특성을 갖는다.

_[Outter.java] 참고_

### 중첩 클래스에서 바깥 클래스 참조 얻기

* 중첩 클래스의 this 키워드를 사용하면 바깥 클래스의 객체 참조가 아니라, 중첩 클래스의 객체 참조가 된다.

```java
바깥클래스.this.필드
바깥클래스.this.메소드();
```

## 중첩 인터페이스

* 중첩 인터페이스는 클래스의 멤버로 선언된 인터페이스를 말한다.

```java
//중첩 인터페이스
class A{
    interface I {
        void method();
    }
}
```

* 인터페이스를 클래스 내부에 선언하는 이유는 해당 클래스와 긴밀한 관계를 맺는 구현 클래스를 만들기 위해서이다.

_[Button.java] 참고_

_[CallListener.java] 참고_

_[MessageListener.java] 참고_

_[ButtonExample].java] 참고_

## 익명 객체

* 익명 객체는 이름이 없는 객체를 말한다.

* 단독으로 생성할 수 없고 클래스를 상속하거나 인터페이스를 구현해야만 생성할 수 있다.

### 익명 자식 객체 생성

* 주의할 점으로는 하나의 실행문이므로 끝에는 세미콜론을 반드시 붙여야 한다는 점이다.

```java
//기본
class Child extends Parent { } //자식 클래스 선언

class A {
    Parent field = new Child(); //필드에 자식 객체를 대입
    void method(){
        Parent localVar = new Child(); //로컬 변수에 자식 객체를 대입
    }
}

//익명 자식 객체
부모클래스 [필드|변수] = new 부모클래스(매개값, ... ){
    //필드
    //메소드
};
```

_[Person.java] 참고_

_[Anonymous.java] 참고_

_[AnonymousExample.java] 참고_

### 익명 구현 객체 생성

```java
//기본
class TV implements RemoteControl{ } 

class A {
    RemoteControl field = new TV(); //필드에 구현 객체를 대입
    void method(){
        RemoteControl localVar = new TV(); //로컬 변수에 구현 객체를 대입
    }
}

//익명 구현 객체
인터페이스 [필드|변수] = new 인터페이스(){
    //인터페이스에 선언된 추상 메소드의 실체 메소드 선언
    //필드
    //메소드
};
```

* 메소드의 매개 변수가 인터페이스 타입일 경우, 메소드 호출 코드에서 익명 구현 객체를 생성해서 매개값으로 대입할 수도 있다.

### 익명 객체의 로컬 변수 사용

* 익명 객체 내부에서는 바깥 클래스의 필드나 메소드는 제한 없이 사용할 수 있다.

* 매개 변수나 로컬 변수는 메소드 실행 후 스택 메모리에서 사라지기 때문에 이를 해결하기 위해 final 키워드를 사용한다.

* 하지만 자바8부터는 final 키워드를 사용하지 않아도 final 특성을 가지고 있는다.